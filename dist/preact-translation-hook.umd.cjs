(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("preact")):typeof define=="function"&&define.amd?define(["exports","preact"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.PreactTranslationHook={},i.Preact))})(this,function(i,o){"use strict";var M=Object.defineProperty;var O=(i,o,r)=>o in i?M(i,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[o]=r;var f=(i,o,r)=>(O(i,typeof o!="symbol"?o+"":o,r),r);var r,e,v,H,p=0,y=[],g=[],E=o.options.__b,L=o.options.__r,b=o.options.diffed,P=o.options.__c,q=o.options.unmount;function A(_,n){o.options.__h&&o.options.__h(e,_,p||n),p=0;var t=e.__H||(e.__H={__:[],__h:[]});return _>=t.__.length&&t.__.push({__V:g}),t.__[_]}function C(_){var n=e.context[_.__c],t=A(r++,9);return t.c=_,n?(t.__==null&&(t.__=!0,n.sub(e)),n.props.value):_.__}function F(){for(var _;_=y.shift();)if(_.__P&&_.__H)try{_.__H.__h.forEach(h),_.__H.__h.forEach(m),_.__H.__h=[]}catch(n){_.__H.__h=[],o.options.__e(n,_.__v)}}o.options.__b=function(_){e=null,E&&E(_)},o.options.__r=function(_){L&&L(_),r=0;var n=(e=_.__c).__H;n&&(v===e?(n.__h=[],e.__h=[],n.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=g,t.__N=t.i=void 0})):(n.__h.forEach(h),n.__h.forEach(m),n.__h=[])),v=e},o.options.diffed=function(_){b&&b(_);var n=_.__c;n&&n.__H&&(n.__H.__h.length&&(y.push(n)!==1&&H===o.options.requestAnimationFrame||((H=o.options.requestAnimationFrame)||V)(F)),n.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==g&&(t.__=t.__V),t.i=void 0,t.__V=g})),v=e=null},o.options.__c=function(_,n){n.some(function(t){try{t.__h.forEach(h),t.__h=t.__h.filter(function(a){return!a.__||m(a)})}catch(a){n.some(function(u){u.__h&&(u.__h=[])}),n=[],o.options.__e(a,t.__v)}}),P&&P(_,n)},o.options.unmount=function(_){q&&q(_);var n,t=_.__c;t&&t.__H&&(t.__H.__.forEach(function(a){try{h(a)}catch(u){n=u}}),t.__H=void 0,n&&o.options.__e(n,t.__v))};var x=typeof requestAnimationFrame=="function";function V(_){var n,t=function(){clearTimeout(a),x&&cancelAnimationFrame(n),setTimeout(_)},a=setTimeout(t,100);x&&(n=requestAnimationFrame(t))}function h(_){var n=e,t=_.__c;typeof t=="function"&&(_.__c=void 0,t()),e=n}function m(_){var n=e;_.__c=_.__(),e=n}class k{constructor(){f(this,"name","translationController");f(this,"_languages",[]);f(this,"_selectedLanguage","");f(this,"_translations",{})}get languages(){return this._languages}get translations(){return this._translations}get selectedLanguage(){return this._selectedLanguage}getTranslation(n,t){return this._translations[n].get(t)}setLanguages(n){this._languages=n}setSelectedLanguage(n){this._selectedLanguage=n}setTranslations(n){this._languages.length!=n.length&&this.handleErrors("languagesTranslationsDifference");for(let t=0;t<this._languages.length;t++){const a=new Map,u=this._languages[t],d=n[t];this._translations[u]=a;const l=Object.keys(d);for(const s of l){const c=d[s];a.set(s,c)}}}handleErrors(n){n==="languagesTranslationsDifference"&&console.error(`The number of languages and translations doesn't match! 
Cant' proceed with traduction`)}}var j=0;function S(_,n,t,a,u,d){var l,s,c={};for(s in n)s=="ref"?l=n[s]:c[s]=n[s];var w={type:_,props:c,key:t,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--j,__source:u,__self:d};if(typeof _=="function"&&(l=_.defaultProps))for(s in l)c[s]===void 0&&(c[s]=l[s]);return o.options.vnode&&o.options.vnode(w),w}const T=o.createContext(new k);function N(_){console.log(T);const n=new k;return n.setLanguages(_.languages),n.setTranslations(_.translations),n.setSelectedLanguage(_.selectedLanguage??_.languages[0]),S(T.Provider,{value:n,children:_.children})}function D(){const _=C(T);return(n,t)=>_.getTranslation(_.selectedLanguage,n)||t||n}i.TranslationProvider=N,i.useTranslation=D,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=preact-translation-hook.umd.cjs.map
